<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>No consonants</title>
<style>
body { font-family: Arial, sans-serif; }
.container { width: 100%; padding: 20px; box-sizing: border-box; font-size: 16px; }
.title { font-size: 40px; font-weight: bold; text-align: center; margin-bottom: 20px; }
.subtitle { font-size: 20px; margin-bottom: 10px; text-align: center; }
.counter { font-size: 24px; font-weight: bold; text-align: center; margin-bottom: 10px; }
.sentence-wrapper { text-align: center; margin-bottom: 20px; }
.sentence { display: inline-block; font-size: 20px; }
.missing-word { width: 15px; padding: 0; font-size: 20px; border: none; border-bottom: 0.5px solid #000; background-color: transparent; outline: none; margin-right: 2px; text-align: center; display: inline-block; }
.correct { background-color: #cef4ce; color: green; }
.incorrect { background-color: #ffb6c19c; color: red; }
button { padding: 5px 10px; border-radius: 5px; border: 2px solid #ccc; cursor: pointer; margin-left: 5px; display: inline-block; vertical-align: middle; }
button:hover { background-color: #A9A9A9; transform: translateY(-2px); }
.hide { display: none; }
</style>
</head>
<body onload="initializeExercise()">

<div class="container">
  <div class="title">No consonants</div>
  <div class="subtitle">Fill in the sentence with the correct consonants.</div>
  <div class="counter" id="sentenceCounter"></div>
  <div id="exerciseOutput" class="sentence-wrapper"></div>
</div>

<script>
var currentTextIndex = 0;
var sentencePairs = [];
var vowels = ['a','e','i','o','u'];

// Sentences
var englishSentences = [
"Today is Monday.",
"I go to school on Tuesday.",
"Wednesday is in the middle of the week.",
"We play football on Thursday.",
"Friday is my favourite day.",
"I sleep late on Saturday.",
"Sunday is a holiday.",
"January is very cold.",
"My birthday is in May.",
"Christmas is in December.",

];

function initializeExercise() {
  // Create sentencePairs
  for (var i=0; i<englishSentences.length; i++){
    sentencePairs.push({sentence: englishSentences[i]});
  }

  // Shuffle sentencePairs
  shuffleArray(sentencePairs);

  // Keep only the first 10 items
  sentencePairs = sentencePairs.slice(0, 10);

  generateChunk();
}

function shuffleArray(array){
  for(var i=array.length-1;i>0;i--){
    var j=Math.floor(Math.random()*(i+1));
    [array[i],array[j]]=[array[j],array[i]];
  }
}

function generateChunk(){
  var sentenceObj = sentencePairs[currentTextIndex];
  var exerciseOutput = document.getElementById('exerciseOutput');
  exerciseOutput.innerHTML='';

  // Sentence
  var sentenceDiv = document.createElement('div');
  sentenceDiv.classList.add('sentence');
  var sentenceWithInputs='';
  for(var i=0;i<sentenceObj.sentence.length;i++){
    var char = sentenceObj.sentence[i];
    if(!vowels.includes(char.toLowerCase()) && /[a-zA-Z]/.test(char)){
      sentenceWithInputs += `<input type="text" class="missing-word" data-index="${i}" oninput="validateCharacter(this)">`;
    } else {
      sentenceWithInputs += char;
    }
  }
  sentenceDiv.innerHTML = sentenceWithInputs;

  // Next button at end
  var nextBtn = document.createElement('button');
  nextBtn.id='nextButton';
  nextBtn.textContent='Next';
  nextBtn.onclick=nextText;
  nextBtn.classList.add('hide');
  sentenceDiv.appendChild(nextBtn);

  exerciseOutput.appendChild(sentenceDiv);

  document.getElementById('sentenceCounter').textContent=(currentTextIndex+1)+'/'+sentencePairs.length;

  // Focus first input
  var firstInput = sentenceDiv.querySelector('.missing-word');
  if(firstInput) firstInput.focus();
}

// Input handling
function validateCharacter(input){
  var index = input.getAttribute('data-index');
  var correctChar = sentencePairs[currentTextIndex].sentence[index];
  var value = input.value.trim();
  input.classList.remove('correct','incorrect');
  if(value==='') return;
  if(value.toLowerCase()===correctChar.toLowerCase()) input.classList.add('correct');
  else input.classList.add('incorrect');

  if(value.length>0) jumpToNextInput(input);
  checkAnswers();
}

function jumpToNextInput(input){
  var next=input.nextElementSibling;
  while(next && !next.classList.contains('missing-word')) next=next.nextElementSibling;
  if(next) next.focus();
}

function jumpToPreviousInput(input){
  var prev=input.previousElementSibling;
  while(prev && !prev.classList.contains('missing-word')) prev=prev.previousElementSibling;
  if(prev){ prev.focus(); prev.value=''; prev.classList.remove('correct','incorrect'); }
}

document.addEventListener('keydown', function(e){
  var active=document.activeElement;
  if(active && active.classList.contains('missing-word')){
    if(e.key==='Backspace' && active.value===''){
      e.preventDefault();
      jumpToPreviousInput(active);
    }
  }
});

function checkAnswers(){
  var sentenceDiv=document.querySelector('.sentence');
  var inputs=sentenceDiv.querySelectorAll('.missing-word');
  var allCorrect=true;
  inputs.forEach(i=>{
    if(!i.classList.contains('correct')) allCorrect=false;
  });
  var nextBtn=document.getElementById('nextButton');
  if(allCorrect) nextBtn.classList.remove('hide');
  else nextBtn.classList.add('hide');
}

function nextText(){
  currentTextIndex=(currentTextIndex+1)%sentencePairs.length;
  generateChunk();
}
</script>
</body>
</html>

